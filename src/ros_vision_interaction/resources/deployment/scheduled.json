{
    "scheduled ask to chat": {
        "nodes": {
            "ask to chat": {
                "transitions": ["exit", "exit"],
                "content": "{'var': 'scheduled ask to chat'}",
                "options": ["Yes", "No"],
                "message_type": "multiple choice one column",
                "result_db_key": "good to chat"
            }
        },
        "start_node_name": "ask to chat"
    },
    "plan tomorrow's checkin": {
        "nodes": {
            "set tomorrow's time": {
                "transitions": "talk again later",
                "content": "When should we plan to talk again tomorrow?",
                "options": "Next",
                "message_type": "time entry",
				"result_convert_from_str_fn": "save_tomorrow_checkin_datetime",
                "result_db_key": "next checkin datetime"
            },
            "talk again later": {
                "transitions": ["exit", "talk again later"],
                "content": "Great, I can't wait to talk to you again then!",
                "options": ["Bye!", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "set tomorrow's time"
    },
    "plan next checkin": {
        "nodes": {
            "plan next checkin": {
                "transitions": ["how many hours", "set tomorrow's time"],
                "content": "{'var': 'plan next checkin'}",
                "options": ["Later today", "Set a time for tomorrow"],
                "message_type": "multiple choice one column"
            },
            "how many hours": {
                "transitions": "talk again later",
                "content": "Please enter the number of hours as 1 to 9.",
                "options": "Next",
                "message_type": "numpad",
				"result_convert_from_str_fn": "later_today_checkin_datetime",
                "result_db_key": "next checkin datetime"
            },
            "set tomorrow's time": {
                "transitions": "talk again later",
                "content": "When is good for you?",
                "options": "Next",
                "message_type": "time entry",
				"result_convert_from_str_fn": "save_tomorrow_checkin_datetime",
                "result_db_key": "next checkin datetime"
            },
            "talk again later": {
                "transitions": ["exit", "talk again later"],
                "content": "Great, I can't wait to talk to you again then!",
                "options": ["Bye!", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "plan next checkin"
    },
    "scheduled checkin": {
        "nodes": {
            "how are you doing": {
                "transitions": ["glad to hear", "sorry", "how are you doing"],
                "content": "How are you doing today?",
                "options": ["Well", "Not so good", "Replay"],
                "message_type": "multiple choice one column"
            },
            "glad to hear": {
                "transitions": ["how do you feel about vision", "glad to hear"],
                "content": "{'var': 'glad to hear'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "sorry": {
                "transitions": ["joke 1", "sorry"],
                "content": "{'var': 'sorry'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "joke 1": {
                "transitions": ["did you use magnifier"],
                "content": "{'var': 'joke'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            },
            "how do you feel about vision": {
                "transitions": ["frustrated response", "no concerns response", "how do you feel about vision"],
                "content": "How do you feel about your vision right now?",
                "options": ["Frustrated", "No concerns", "Replay"],
                "message_type": "multiple choice one column"
            },
            "frustrated response": {
                "transitions": ["joke 2", "frustrated response"],
                "content": "{'var': 'frustrated response'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "no concerns response": {
                "transitions": ["how was magnifier use"],
                "content": "{'var': 'no concerns response'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            },
            "joke 2": {
                "transitions": ["did you use magnifier"],
                "content": "{'var': 'joke'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            },
            "did you use magnifier": {
                "transitions": ["keep trying", "how was magnifier use"],
                "content": "{'var': 'did you use magnifier'}",
                "options": ["No", "Yes"],
                "message_type": "multiple choice one column",
                "result_db_key": "is used magnifier today"
            },
            "how was magnifier use": {
                "transitions": [
                    "excellent",
                    "good",
                    "good",
                    "fair",
                    "fair",
                    "poor",
                    "how was magnifier use"
                ],
                "content": "{'db': 'user name', 'default value': ''}, how is it going with your magnifier?",
                "options": ["10", "8", "6", "4", "2", "0", "Replay"],
                "message_type": "image",
                "args": ["https://drive.google.com/uc?export=view&id=1p9IkFzCCIqsdgdhAvVefK2E1d0lPObcO"]
            },
            "excellent": {
                "transitions": ["exit"],
                "content": "{'var': 'excellent response'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            },
            "good": {
                "transitions": ["exit"],
                "content": "{'var': 'good response'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            },
            "fair": {
                "transitions": ["exit"],
                "content": "{'var': 'fair response'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            },
            "poor": {
                "transitions": ["exit", "poor"],
                "content": "I am so sorry that it has been hard to use the magnifier! It takes time to get better at it. Let's set a goal for tomorrow to just give it a try and not feel bad about however it goes. Each try counts, so you should feel good about trying.",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "keep trying": {
                "transitions": ["exit", "keep trying"],
                "content": "Oh, well don't forget about using it whenever you are struggling to read.",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "how are you doing"
    },
    "feedback video": {
        "nodes": {
            "introduce video": {
                "transitions": ["feedback video", "introduce video"],
                "content": "{'var': 'introduce video', 'index': '{'db': 'video intro index'}'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "feedback video": {
                "transitions": ["exit", "feedback video"],
                "content": "First, press the middle of the screen with the triangle button in the center to watch the video your optometrist asked me to show you.",
                "options": ["Next", "Replay"],
                "message_type": "video",
                "args": ["{'db': 'video to play', 'default value': ''}"]
            }
        },
        "start_node_name": "feedback video"
    },
    "no feedback video": {
        "nodes": {
            "no video": {
                "transitions": ["exit"],
                "content": "{'var': 'no video'}",
                "options": ["Next",  "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "no video"
    },
    "ask to do evaluation": {
        "nodes": {
            "ask to do evaluation": {
                "transitions": ["exit", "take minds off reading", "ask to do evaluation"],
                "content": "Next, can you show me how you read something with your magnifier?",
                "options": ["Yes", "Not now", "Replay"],
                "message_type": "multiple choice one column",
                "result_db_key": "is do evaluation"
            },
            "take minds off reading": {
                "transitions": ["tell me a joke", "no problem", "take minds off reading"],
                "content": "OK, let's take our minds off reading. I love funny jokes. Can you tell me one?",
                "options": ["Yes", "Not now", "Replay"],
                "message_type": "multiple choice one column"
            },
            "no problem": {
                "transitions": ["schedule", "no problem"],
                "content": "No problem!",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "tell me a joke": {
                "transitions": ["that was great", "tell me a joke"],
                "content": "Go for it!",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "that was great": {
                "transitions": ["schedule"],
                "content": "*QT/happy*That was {'var': 'great'}!",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            },
            "schedule": {
                "transitions": ["talk again later"],
                "content": "Let's schedule a time to {'var': 'chat'} tomorrow. When is good for you?",
                "options": ["Next"],
                "message_type": "time entry",
				"result_convert_from_str_fn": "save_tomorrow_checkin_datetime",
                "result_db_key": "next checkin datetime"
            },
            "talk again later": {
                "transitions": ["exit", "talk again later"],
                "content": "Great, I can't wait to talk to you again then!",
                "options": ["Bye!", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "ask to do evaluation"
    },
    "introduce evaluation": {
        "nodes": {
            "check": {
                "transitions": ["exit"],
                "content": "Please get your magnifier and the next reading task labeled {'db': 'current reading id', 'default value': 'N/A'} in the {'db': 'current reading color', 'default value': 'N/A'} envelope. Please confirm the envelope number that I just said by typing it on the screen. Then you may open the envelope, and hit the next button when you are ready to start reading with your magnifier.",
                "options": ["Next"],
                "message_type": "numpad",
                "tests": "check reading id",
                "error_message": "Please enter the correct ID.",
                "error_options": ["Oops"]
            }
        },
        "start_node_name": "check"
    },
    "last evaluation": {
        "nodes": {
            "last evaluation": {
                "transitions": ["exit", "last evaluation"],
                "content": "The last time you did this reading test, your score was {'db': 'last score', 'default value': 'N/A'} and your best score ever was {'db': 'best score', 'default value': 'N/A'}. Let's see if you can beat that today!",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "last evaluation"
    },
    "evaluation": {
        "nodes": {
            "evaluation": {
                "transitions": ["exit"],
                "content": "Go ahead and open the envelope, read the content aloud while using your magnifier, then tap 'Next'.",
                "options": ["Next", "Unable to read"],
                "message_type": "multiple choice one column",
                "result_db_key": "unable to read"
            }
        },
        "start_node_name": "evaluation"
    },
    "spot reading evaluation": {
        "nodes": {
            "evaluation": {
                "transitions": ["exit"],
                "content": "Please follow the instructions on the paper and enter the {'db': 'spot reading counter'} number into the keypad.",
                "options": ["Done", "Unable to read"],
                "message_type": "numpad",
                "result_db_key": "spot reading answer"
            }
        },
        "start_node_name": "evaluation"
    },
    "retry spot reading": {
        "nodes": {
            "retry": {
                "transitions": ["evaluation", "retry"],
                "content": "{'var': 'retry spot reading'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "evaluation": {
                "transitions": ["exit"],
                "content": "Please follow the instructions on the paper.",
                "options": ["Next", "Unable to read"],
                "message_type": "numpad",
                "result_db_key": "spot reading answer"
            }
        },
        "start_node_name": "retry"
    },
    "spot reading feedback": {
        "nodes": {
            "feedback": {
                "transitions": ["exit", "feedback"],
                "content": "{'db': 'spot reading feedback'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "feedback"
    },
    "post SSRT": {
        "nodes": {
            "post SSRT": {
                "transitions": ["exit", "post SSRT"],
                "content": "Related to the story you just read...{'var': 'post SSRT', 'index': '{'db': 'post SRT index'}'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "post SSRT"
    },
    "post IReST": {
        "nodes": {
            "post IReST": {
                "transitions": ["exit", "exit", "post IReST"],
                "content": "{'var': 'post IReST', 'index': '{'db': 'IReST reading index'}'}",
                "options": ["Yes", "No", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "post IReST"
    },
    "post evaluation": {
        "nodes": {
             "chart self report": {
                "transitions": [
                    "ask for spoken self report",
                    "ask for spoken self report",
                    "ask for spoken self report",
                    "ask for spoken self report",
                    "ask for spoken self report",
                    "ask for spoken self report",
                    "chart self report"
                ],
                "content": "Tell me, how do you think you did on that reading task?",
                "options": ["10", "8", "6", "4", "2", "0", "Replay"],
                "message_type": "image",
                "args": ["https://drive.google.com/uc?export=view&id=1p9IkFzCCIqsdgdhAvVefK2E1d0lPObcO"],
                 "result_db_key": "feelings index"
            },
            "ask for spoken self report": {
                "transitions": ["spoken self report", "grit feedback", "ask for spoken self report"],
                "content": "Really? Care to tell me more?",
                "options": ["Yes", "No", "Replay"],
                "message_type": "multiple choice one column"
            },
            "spoken self report": {
                "transitions": ["grit feedback", "spoken self report"],
                "content": "I'm listening!",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            },
            "grit feedback": {
                "transitions": ["exit"],
                "content": "{'var': 'grit feedback', 'index': '{'db': 'grit feedback index'}'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "chart self report"
    },
    "reward": {
        "nodes": {
            "reward": {
                "transitions": ["exit"],
                "content": "Next, I have a riddle for you! {'var': 'riddles'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "reward"
    },
    "no magnifier use": {
        "nodes": {
            "ask if given up": {
                "transitions": ["gave up", "exit", "ask if given up"],
                "content": "Have you given up on the magnifier or not needed it?",
                "options": ["Gave up", "No need", "Replay"],
                "message_type": "multiple choice one column"
            },
            "gave up": {
                "transitions": ["exit"],
                "content": "{'var': 'poor response'}",
                "options": ["Next"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "ask if given up"
    },
    "ask to do perseverance": {
        "nodes": {
            "ask to do perseverance": {
                "transitions": ["exit", "exit", "ask to do perseverance"],
                "content": "{'var': 'perseverance'}",
                "options": ["Yes", "No", "Replay"],
                "message_type": "multiple choice one column",
                "result_db_key": "is start perseverance"
            }
        },
        "start_node_name": "ask to do perseverance"
    },
    "perseverance": {
        "nodes": {
            "perseverance": {
                "transitions": ["exit"],
                "content": "*question_1*",
                "options": ["Done", "Unable to read"],
                "message_type": "multiple choice one column",
                "result_db_key": "unable to read"
            }
        },
        "start_node_name": "perseverance"
    },
    "is continue perseverance": {
        "nodes": {
            "is continue perseverance": {
                "transitions": ["exit", "exit"],
                "content": "Would you like to continue reading?",
                "options": ["Continue", "Stop"],
                "message_type": "multiple choice one column",
                "result_db_key": "is continue perseverance"
            }
        },
        "start_node_name": "is continue perseverance"
    },
    "closing": {
        "nodes": {
            "goodbye": {
                "transitions": ["exit"],
                "content": "{'var': 'goodbye'}",
                "options": ["Bye!"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "goodbye"
    },
    "reminder for prompted": {
        "nodes": {
            "reminder": {
                "transitions": ["exit", "reminder"],
                "content": "I would really love to talk with you more than once a day and hope you can find some time to chat with me in addition to the scheduled time. You can just tap the tablet screen to wake me up at any time that works for you; I'm here for you. During an unscheduled session, you can read any of your own items or reading materials that you would like to share with me, so you won't need to do any of the reading tests then. I bet you'll find it enjoyable! I encourage you to give it a try whenever it's a good time for you.",
                "options": ["Sounds good!", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "reminder"
    },
    "grit transition": {
        "nodes": {
            "grit": {
                "transitions": ["exit", "grit"],
                "content": "{'var': 'transition'}",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "grit"
    },
    "introduce mindfulness": {
        "nodes": {
            "introduce mindfulness": {
                "transitions": ["exit", "introduce mindfulness"],
                "content": "There is plenty of evidence that practicing mindfulness can have many benefits. Guided meditation exercises can help you learn how to shift your attention to focus on the present moment, instead of overthinking about negative past experiences or uncertainty of the future. Let's give a try together now, shall we?",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "introduce mindfulness"
    },
    "revisit mindfulness": {
        "nodes": {
            "revisit mindfulness": {
                "transitions": ["exit", "revisit mindfulness"],
                "content": "Do you remember the mindfulness practice that we tried before? Let's try it again now, shall we?",
                "options": ["Next", "Replay"],
                "message_type": "multiple choice one column"
            }
        },
        "start_node_name": "revisit mindfulness"
    }
}
